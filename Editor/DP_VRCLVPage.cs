#if UNITY_EDITOR\nusing UnityEditor;\nusing UnityEngine;\nusing UnityEditor.PackageManager;\nusing UnityEditor.PackageManager.Requests;\n\nnamespace DemonShop.Editor\n{\n    public static class DP_VRCLVPage\n    {\n        // NOTE: 可按需改成特定分支/* Block comment translated: ag。若 UPM 失败，会弹出打开网页。 *// translated\n        private const string VRCLV_GIT = "https://github.com/REDSIM/VRCLightVolumes.git";\n\n        private static AddRequest _addReq;\n        private static string _status;\n\n        public static void DrawGUI()\n        {\n            GUILayout.Space(6);\n            GUILayout.Label(DP_Loc.T("tabVRCLV"), EditorStyles.boldLabel);\n\n            using (new EditorGUILayout.VerticalScope(EditorStyles.helpBox))\n            {\n                GUILayout.Label(DP_Loc.T("vrclvInstall"), EditorStyles.boldLabel);\n                using (new EditorGUILayout.HorizontalScope())\n                {\n                    if (_addReq == null && GUILayout.Button(DP_Loc.T("vrclvInstall"), GUILayout.Height(22)))\n                    {\n                        TryAdd(VRCLV_GIT);\n                    }\n                    if (GUILayout.Button(DP_Loc.T("shaderOpen"), GUILayout.Width(140)))\n                    {\n                        Application.OpenURL(VRCLV_GIT);\n                    }\n                }\n                if (!string.IsNullOrEmpty(_status)) EditorGUILayout.HelpBox(_status, MessageType.Info);\n            }\n\n            GUILayout.Space(8);\n            GUILayout.Label(DP_Loc.T("lvHeader"), EditorStyles.boldLabel);\n            DP_LVAdvisor.DrawGUI();\n\n            GUILayout.Space(10);\n            GUILayout.Label(DP_Loc.T("lvOptHeader"), EditorStyles.boldLabel);\n            DP_LVOptimizer.DrawGUI();\n        }\n\n        private static void TryAdd(string url)\n        {\n            _status = "Adding via UPM: " + url;\n            _addReq = Client.Add(url);\n            EditorApplication.update += Poll;\n        }\n\n        private static void Poll()\n        {\n            if (_addReq == null) { EditorApplication.update -= Poll; return; }\n            if (!_addReq.IsCompleted) return;\n\n            if (_addReq.Status == StatusCode.Success)\n                _status = "Installed: " + _addReq.Result.packageId;\n            else\n                _status = "UPM failed. You can open the repo and install manually.";\n\n            _addReq = null;\n            EditorApplication.update -= Poll;\n        }\n    }\n}\n#endif